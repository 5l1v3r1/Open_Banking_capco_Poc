!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("@angular/core"),require("@ngx-formly/core")):"function"==typeof define&&define.amd?define("@ngx-formly/core/json-schema",["exports","@angular/core","@ngx-formly/core"],r):r((e["ngx-formly"]=e["ngx-formly"]||{},e["ngx-formly"].core=e["ngx-formly"].core||{},e["ngx-formly"].core["json-schema"]={}),e.ng.core,e["ngx-formly"].core)}(this,function(e,r,t){"use strict";var l=function(){return(l=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)};function s(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,o,i=t.call(e),a=[];try{for(;(void 0===r||0<r--)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(t=i["return"])&&t.call(i)}finally{if(o)throw o.error}}return a}function f(e){return""===e||e===undefined||null===e}var n=function(){function e(){}return e.prototype.toFieldConfig=function(e,r){return this._toFieldConfig(e,l({schema:e},r||{}))},e.prototype._toFieldConfig=function(r,n){var o=this;r.$ref&&(r=this.resolveDefinition(r,n));var i={type:this.guessType(r),defaultValue:r["default"],templateOptions:{label:r.title,readonly:r.readOnly,description:r.description}};switch(i.type){case"number":case"integer":i.parsers=[function(e){return f(e)?null:Number(e)}],r.hasOwnProperty("minimum")&&(i.templateOptions.min=r.minimum),r.hasOwnProperty("maximum")&&(i.templateOptions.max=r.maximum),r.hasOwnProperty("exclusiveMinimum")&&this.addValidator(i,"exclusiveMinimum",function(e){return f(e.value)||e.value>r.exclusiveMinimum}),r.hasOwnProperty("exclusiveMaximum")&&this.addValidator(i,"exclusiveMaximum",function(e){return f(e.value)||e.value<r.exclusiveMaximum}),r.hasOwnProperty("multipleOf")&&(i.templateOptions.step=r.multipleOf,this.addValidator(i,"multipleOf",function(e){return f(e.value)||e.value%r.multipleOf==0}));break;case"string":["minLength","maxLength","pattern"].forEach(function(e){r.hasOwnProperty(e)&&(i.templateOptions[e]=r[e])});break;case"object":i.fieldGroup=[];var e=s(this.resolveDependencies(r),2),a=e[0],u=e[1];Object.keys(r.properties||{}).forEach(function(t){var e=o._toFieldConfig(r.properties[t],n);i.fieldGroup.push(e),e.key=t,Array.isArray(r.required)&&-1!==r.required.indexOf(t)&&(e.templateOptions.required=!0),!e.templateOptions.required&&a[t]&&(e.expressionProperties={"templateOptions.required":function(r){return r&&a[t].some(function(e){return!f(r[e])})}}),u[t]&&i.fieldGroup.push(l({},o._toFieldConfig(u[t],n),{hideExpression:function(e){return!e||f(e[t])}}))});break;case"array":i.fieldGroup=[],Object.defineProperty(i,"fieldArray",{get:function(){if(!Array.isArray(r.items))return o._toFieldConfig(r.items,n);var e=r.items[i.fieldGroup.length]?r.items[i.fieldGroup.length]:r.additionalItems;return e?o._toFieldConfig(e,n):null},enumerable:!0,configurable:!0})}return r["enum"]&&(i.type="enum",i.templateOptions.options=r["enum"].map(function(e){return{value:e,label:e}})),r.widget&&r.widget.formlyConfig&&(i=t.ÉµreverseDeepMerge(r.widget.formlyConfig,i)),n.map?n.map(i,r):i},e.prototype.resolveDefinition=function(t,e){var r=s(t.$ref.split("#/"),2),n=r[0],o=r[1];if(n)throw Error("Remote schemas for "+t.$ref+" not supported yet.");var i=o?o.split("/").reduce(function(e,r){return e&&e.hasOwnProperty(r)?e[r]:null},e.schema):null;if(!i)throw Error("Cannot find a definition for "+t.$ref+".");return i.$ref?this.resolveDefinition(i,e):l({},i,["title","description","default"].reduce(function(e,r){return t.hasOwnProperty(r)&&(e[r]=t[r]),e},{}))},e.prototype.resolveDependencies=function(t){var n={},o={};return Object.keys(t.dependencies||{}).forEach(function(r){var e=t.dependencies[r];Array.isArray(e)?e.forEach(function(e){n[e]?n[e].push(r):n[e]=[r]}):o[r]=e}),[n,o]},e.prototype.guessType=function(e){var r=e.type;return!r&&e.properties?"object":r},e.prototype.addValidator=function(e,r,t){e.validators=e.validators||{},e.validators[r]=t},e.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=r.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}();e.FormlyJsonschema=n,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-formly-core-json-schema.umd.min.js.map